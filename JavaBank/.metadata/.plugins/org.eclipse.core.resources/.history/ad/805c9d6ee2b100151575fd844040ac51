import java.text.DateFormat;
import java.util.Date;

import net.sf.ofx4j.OFXException;
import net.sf.ofx4j.client.*;
import net.sf.ofx4j.client.impl.FinancialInstitutionServiceImpl;
import net.sf.ofx4j.client.impl.OFXHomeFIDataStore;
import net.sf.ofx4j.domain.data.banking.AccountType;
import net.sf.ofx4j.domain.data.banking.BankAccountDetails;

public class Main {

	public static void main(String[] args) {
		OFXHomeFIDataStore fid = new OFXHomeFIDataStore();
		fid.setUrl("https://ofx.bankofamerica.com/cgi-forte/ofx?servicename=ofx_2-3&pagename=bofa");
		FinancialInstitutionData bofa = fid.getInstitutionData("6805");
		FinancialInstitutionService service = new FinancialInstitutionServiceImpl();
		FinancialInstitution fi = service.getFinancialInstitution(bofa);
		
		BankAccountDetails bankAccountDetails = new BankAccountDetails();
		bankAccountDetails.setRoutingNumber("001059644184");
		bankAccountDetails.setAccountNumber("121000358");
		bankAccountDetails.setAccountType(AccountType.CHECKING);
		
		BankAccount bankAccount = fi.loadBankAccount(bankAccountDetails, "jaay5389", "Jar060305*");
	
		Date startDate = new Date("11/01/2015");
		Date endDate = new Date("12/01/2015");
		try {
			AccountStatement statement
			  = bankAccount.readStatement(startDate, endDate);
		} catch (OFXException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

}
