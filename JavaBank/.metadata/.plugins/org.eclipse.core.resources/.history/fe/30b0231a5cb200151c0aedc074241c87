import java.net.MalformedURLException;
import java.net.URL;
import java.text.DateFormat;
import java.util.Date;
import java.util.Map;

import net.sf.ofx4j.OFXException;
import net.sf.ofx4j.client.*;
import net.sf.ofx4j.client.impl.BaseFinancialInstitutionData;
import net.sf.ofx4j.client.impl.FinancialInstitutionServiceImpl;
import net.sf.ofx4j.client.impl.OFXHomeFIDataStore;
import net.sf.ofx4j.domain.data.banking.AccountType;
import net.sf.ofx4j.domain.data.banking.BankAccountDetails;
import net.sf.ofx4j.domain.data.creditcard.CreditCardAccountDetails;

public class Main {

	public static void main(String[] args) throws MalformedURLException, OFXException {
		//OFXHomeFIDataStore fid = new OFXHomeFIDataStore();
		//fid.setUrl("https://ofx.bankofamerica.com/cgi-forte/ofx?servicename=ofx_2-3&pagename=bofa");
		//FinancialInstitutionData chase1 = fid.getInstitutionData("5959");
		
		//System.out.println(chase1.getId());
		//FinancialInstitutionService service = new FinancialInstitutionServiceImpl();
		//FinancialInstitution fi = service.getFinancialInstitution(chase1);
		
		BaseFinancialInstitutionData chase = new BaseFinancialInstitutionData();
		//chase.setId("");
		chase.setFinancialInstitutionId("5959");
		chase.setName("Bofa Credit Card");
		chase.setBrokerId(null);
		chase.setOrganization("HAN");
		chase.setOFXURL(new URL("https://eftx.bankofamerica.com/eftxweb/access.ofx"));
		
		FinancialInstitutionService service = new FinancialInstitutionServiceImpl();
		FinancialInstitution fi = service.getFinancialInstitution(chase);
		
		CreditCardAccountDetails ccDetails = new CreditCardAccountDetails();
		ccDetails.setAccountNumber("4400660106879199");
		CreditCardAccount ccAccount = fi.loadCreditCardAccount(ccDetails, "jaay5389", "Jar060305*");
	
		Date startDate = new Date(2015,11,01);
		Date endDate = new Date(2015,12,01);
		AccountStatement statement
		  = ccAccount.readStatement(startDate, endDate);
	}

}
